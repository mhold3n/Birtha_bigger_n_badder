# .lan aliases for all services (avoid mDNS conflicts with .local)

api.lan:443 {
    import lan
    handle @internal {
        reverse_proxy api:8080
    }
    handle { respond "Forbidden" 403 }
    tls internal
}

router.lan:443 {
    import lan
    handle @internal { reverse_proxy router:8000 }
    handle { respond "Forbidden" 403 }
    tls internal
}

grafana.lan:443 {
    import lan
    handle @internal { reverse_proxy grafana:3000 }
    handle { respond "Forbidden" 403 }
    tls internal
}

prometheus.lan:443 {
    import lan
    handle @internal { reverse_proxy prometheus:9090 }
    handle { respond "Forbidden" 403 }
    tls internal
}

homarr.lan:443 {
    import lan
    handle @internal { reverse_proxy homarr:7575 }
    handle { respond "Forbidden" 403 }
    tls internal
}

pihole.lan:443 {
    import lan
    handle @internal { reverse_proxy pihole:80 }
    handle { respond "Forbidden" 403 }
    tls internal
}

meili.lan:443 {
    import lan
    handle @internal { reverse_proxy meilisearch:7700 }
    handle { respond "Forbidden" 403 }
    tls internal
}

searx.lan:443 {
    import lan
    handle @internal { reverse_proxy searxng:8080 }
    handle { respond "Forbidden" 403 }
    tls internal
}

sso.lan:443 {
    import lan
    handle @internal { reverse_proxy authentik-server:9000 }
    handle { respond "Forbidden" 403 }
    tls internal
}

nextcloud.lan:443 {
    import lan
    handle @internal { reverse_proxy nextcloud:80 }
    handle { respond "Forbidden" 403 }
    tls internal
}

immich.lan:443 {
    import lan
    handle @internal { reverse_proxy immich-server:2283 }
    handle { respond "Forbidden" 403 }
    tls internal
}

vikunja.lan:443 {
    import lan
    handle @internal { reverse_proxy vikunja-frontend:80 }
    handle { respond "Forbidden" 403 }
    tls internal
}

pelican.lan:443 {
    import lan
    handle @internal { reverse_proxy pelican-panel:80 }
    handle { respond "Forbidden" 403 }
    tls internal
}

mcp-github.lan:443 {
    import lan
    handle @internal { reverse_proxy mcp-github:7000 }
    handle { respond "Forbidden" 403 }
    tls internal
}

mcp-files.lan:443 {
    import lan
    handle @internal { reverse_proxy mcp-filesystem:7001 }
    handle { respond "Forbidden" 403 }
    tls internal
}

mcp-secrets.lan:443 {
    import lan
    handle @internal { reverse_proxy mcp-secrets:7002 }
    handle { respond "Forbidden" 403 }
    tls internal
}

mcp-vector.lan:443 {
    import lan
    handle @internal { reverse_proxy mcp-vector-db:7003 }
    handle { respond "Forbidden" 403 }
    tls internal
}

mcp-registry.lan:443 {
    import lan
    handle @internal { reverse_proxy mcp-registry:8000 }
    handle { respond "Forbidden" 403 }
    tls internal
}

# WrkHrs AI Stack Services
ai.lan:443 {
    import lan
    handle @internal { reverse_proxy wrkhrs-gateway:8000 }
    handle { respond "Forbidden" 403 }
    tls internal
}

mlflow.lan:443 {
    import lan
    handle @internal { reverse_proxy mlflow:5000 }
    handle { respond "Forbidden" 403 }
    tls internal
}

tempo.lan:443 {
    import lan
    handle @internal { reverse_proxy tempo:3200 }
    handle { respond "Forbidden" 403 }
    tls internal
}

loki.lan:443 {
    import lan
    handle @internal { reverse_proxy loki:3100 }
    handle { respond "Forbidden" 403 }
    tls internal
}

jaeger.lan:443 {
    import lan
    handle @internal { reverse_proxy jaeger:16686 }
    handle { respond "Forbidden" 403 }
    tls internal
}

# Media
sonarr.lan:443 {
    import lan
    handle @internal { reverse_proxy sonarr:8989 }
    handle { respond "Forbidden" 403 }
    tls internal
}

radarr.lan:443 {
    import lan
    handle @internal { reverse_proxy radarr:7878 }
    handle { respond "Forbidden" 403 }
    tls internal
}

jellyseerr.lan:443 {
    import lan
    handle @internal { reverse_proxy jellyseerr:5055 }
    handle { respond "Forbidden" 403 }
    tls internal
}

prowlarr.lan:443 {
    import lan
    handle @internal { reverse_proxy prowlarr:9696 }
    handle { respond "Forbidden" 403 }
    tls internal
}
